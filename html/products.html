<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products | Tzedek Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/product.css">
</head>
<body>
    <!-- Navbar -->
    <header class="navbar">
        <div class="container">
            <div class="navbar-content">
                <div class="navbar-logo">
                    <a href="index.html" class="logo">Tzedek</a>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="navbar-links desktop-nav">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="about.html" class="nav-link">About</a>
                    <a href="shop.html" class="nav-link">Shops</a>
                    <a href="products.html" class="nav-link active">Products</a>
                    <a href="contact.html" class="nav-link">Contact</a>
                </nav>
            
                <div class="navbar-auth desktop-nav">
                    <a href="register.html" class="nav-link">Sign Up</a>
                    <a href="register.html" class="btn-primary">Become a Seller</a>
                    <a href="cart.html" class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">3</span>
                    </a>
                </div>
                
                <!-- Mobile actions -->
                <div class="mobile-menu-button">
                    <!-- Cart icon for mobile -->
                    <a href="cart.html" class="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="mobileCartCount">3</span>
                    </a>
                    <!-- Menu toggle button -->
                    <button id="menuToggle" aria-label="Toggle menu">
                        <i class="fas fa-bars menu-icon"></i>
                        <i class="fas fa-times close-icon hidden"></i>
                    </button>
                </div>
            </div>

            <!-- Mobile nav -->
            <nav id="mobileNav" class="mobile-nav hidden">
                <div class="container">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="about.html" class="nav-link">About</a>
                    <a href="shop.html" class="nav-link">Shops</a>
                    <a href="products.html" class="nav-link active">Products</a>
                    <a href="contact.html" class="nav-link">Contact</a>
                    <a href="register.html" class="nav-link">Sign Up</a>
                    <a href="register.html" class="btn-primary">Become a Seller</a>
                </div>
            </nav>
        </div>
    </header>
    

    <!-- Products Page -->
    <section id="products-page">
        <div class="container products-page">
            <div class="section-header">
                <h2 class="section-title">All Products</h2>
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Search products...">
                </div>
            </div>
            
            <button class="mobile-filter-toggle" id="mobileFilterToggle">
                <i class="fas fa-filter"></i>
                Filters
            </button>
            
            <div class="products-container">
                <div class="filters" id="productsFilters">
                    <h3>Filters</h3>
                    
                    <div class="filter-section">
                        <h3>Categories</h3>
                        <ul class="filter-options" id="categoryFilters">
                            <li>
                                <label>
                                    <input type="checkbox" name="category" value="electronics"> Electronics
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="category" value="phones"> Phones
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="category" value="laptops"> Laptops
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="category" value="accessories"> Accessories
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="category" value="gadgets"> Gadgets
                                </label>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="filter-section">
                        <h3>Price Range</h3>
                        <div class="price-range-container">
                            <input type="range" min="0" max="500000" value="500000" class="price-range" id="priceRange">
                            <div class="price-display">
                                <span>₦0</span>
                                <span id="maxPrice">₦500,000</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="filter-section">
                        <h3>Brand</h3>
                        <ul class="filter-options" id="brandFilters">
                            <li>
                                <label>
                                    <input type="checkbox" name="brand" value="apple"> Apple
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="brand" value="samsung"> Samsung
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="brand" value="google"> Google
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="brand" value="sony"> Sony
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="checkbox" name="brand" value="xiaomi"> Xiaomi
                                </label>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="filter-section">
                        <h3>Rating</h3>
                        <ul class="filter-options" id="ratingFilters">
                            <li>
                                <label>
                                    <input type="radio" name="rating" value="5"> ★★★★★ (5)
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="rating" value="4"> ★★★★☆ (4+)
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="rating" value="3"> ★★★☆☆ (3+)
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="rating" value="2"> ★★☆☆☆ (2+)
                                </label>
                            </li>
                            <li>
                                <label>
                                    <input type="radio" name="rating" value="1"> ★☆☆☆☆ (1+)
                                </label>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="filter-actions">
                        <button class="btn-outline full-width" id="resetFilters">Reset Filters</button>
                    </div>
                </div>
                
                <div class="products-listing" id="productsListing">
                    <!-- Products will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Product added to cart!</span>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 class="footer-title">Tzedek</h3>
                    <p>A community-driven global marketplace empowering entrepreneurs to connect and grow.</p>
                    <div class="footer-social">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="shop.html">Shops</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="#">Size Guide</a></li>
                        <li><a href="#">Contact Support</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul class="footer-contact">
                        <li><i class="fas fa-envelope"></i> support@tzedek.com</li>
                        <li><i class="fas fa-phone"></i> +234 (0) 123 456 7890</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Business Avenue, Lagos, Nigeria</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; <span id="currentYear">2025</span> Tzedek. All rights reserved. | <a href="#" class="text-tzedek-green">Privacy Policy</a> | <a href="#" class="text-tzedek-green">Terms of Service</a></p>
            </div>
        </div>
    </footer>

    <script>
        // Cart Management System
        class CartManager {
            constructor() {
                this.cart = this.getCartFromStorage();
                this.updateCartCount();
            }
            
            getCartFromStorage() {
                const cart = localStorage.getItem('tzedekCart');
                return cart ? JSON.parse(cart) : [];
            }
            
            saveCartToStorage() {
                localStorage.setItem('tzedekCart', JSON.stringify(this.cart));
                this.updateCartCount();
            }
            
            updateCartCount() {
                const cartCount = document.getElementById('cartCount');
                const mobileCartCount = document.getElementById('mobileCartCount');
                if (cartCount && mobileCartCount) {
                    const totalItems = this.cart.reduce((total, item) => total + item.quantity, 0);
                    cartCount.textContent = totalItems;
                    mobileCartCount.textContent = totalItems;
                }
            }
            
            addToCart(product) {
                const existingItemIndex = this.cart.findIndex(item => 
                    item.id === product.id && 
                    item.size === product.size && 
                    item.color === product.color
                );
                
                if (existingItemIndex > -1) {
                    // Update quantity if item already exists
                    this.cart[existingItemIndex].quantity += product.quantity;
                } else {
                    // Add new item to cart
                    this.cart.push(product);
                }
                
                this.saveCartToStorage();
                this.showToast(`${product.name} added to cart!`);
            }
            
            removeFromCart(productId, size, color) {
                this.cart = this.cart.filter(item => 
                    !(item.id === productId && item.size === size && item.color === color)
                );
                this.saveCartToStorage();
            }
            
            updateQuantity(productId, size, color, newQuantity) {
                const item = this.cart.find(item => 
                    item.id === productId && item.size === size && item.color === color
                );
                
                if (item) {
                    item.quantity = newQuantity;
                    this.saveCartToStorage();
                }
            }
            
            getCartTotal() {
                return this.cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            }
            
            clearCart() {
                this.cart = [];
                this.saveCartToStorage();
            }
            
            showToast(message) {
                const toast = document.getElementById('toast');
                const toastMessage = document.getElementById('toastMessage');
                
                toastMessage.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }

        // Product data - This would typically come from an API in a real application
        const allProducts = [
            {
                id: 1,
                name: "Premium Smartphone X1",
                category: "electronics",
                brand: "apple",
                price: 75000,
                image: "https://images.unsplash.com/photo-1546868871-7041f2a55e12?auto=format&fit=crop&w=400&q=80",
                rating: 4.8,
                description: "Latest smartphone with advanced camera system"
            },
            {
                id: 2,
                name: "Ultra Slim Laptop Pro",
                category: "laptops",
                brand: "samsung",
                price: 210000,
                image: "https://images.unsplash.com/photo-1593642632823-8f785ba67e45?auto=format&fit=crop&w=400&q=80",
                rating: 4.6,
                description: "Lightweight laptop with powerful processor"
            },
            {
                id: 3,
                name: "Wireless Noise-Cancelling Headphones",
                category: "accessories",
                brand: "sony",
                price: 32500,
                image: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?auto=format&fit=crop&w=400&q=80",
                rating: 4.9,
                description: "High-quality audio with noise cancellation"
            },
            {
                id: 4,
                name: "Smart Fitness Tracker",
                category: "gadgets",
                brand: "google",
                price: 18900,
                image: "https://images.unsplash.com/photo-1523275335684-37898b6baf30?auto=format&fit=crop&w=400&q=80",
                rating: 4.5,
                description: "Track your fitness goals with precision"
            },
            {
                id: 5,
                name: "Gaming Mouse",
                category: "accessories",
                brand: "xiaomi",
                price: 12500,
                image: "https://images.unsplash.com/photo-1552036984-538597288883?auto=format&fit=crop&w=400&q=80",
                rating: 4.7,
                description: "Ergonomic design for long gaming sessions"
            },
            {
                id: 6,
                name: "Bluetooth Speaker",
                category: "accessories",
                brand: "apple",
                price: 25000,
                image: "https://images.unsplash.com/photo-1557777792-d63152054683?auto=format&fit=crop&w=400&q=80",
                rating: 4.4,
                description: "Portable speaker with excellent sound quality"
            },
            {
                id: 7,
                name: "Smart Watch Series 5",
                category: "gadgets",
                brand: "apple",
                price: 95000,
                image: "https://images.unsplash.com/photo-1599757525464-952840323178?auto=format&fit=crop&w=400&q=80",
                rating: 4.8,
                description: "Advanced health monitoring features"
            },
            {
                id: 8,
                name: "Professional Camera",
                category: "electronics",
                brand: "samsung",
                price: 180000,
                image: "https://images.unsplash.com/photo-1580427854964-952840323178?auto=format&fit=crop&w=400&q=80",
                rating: 4.9,
                description: "High-resolution camera for professionals"
            }
        ];

        // Initialize cart manager
        const cartManager = new CartManager();
        
        // DOM elements
        const searchInput = document.getElementById('searchInput');
        const priceRange = document.getElementById('priceRange');
        const maxPrice = document.getElementById('maxPrice');
        const resetFiltersBtn = document.getElementById('resetFilters');
        const productsListing = document.getElementById('productsListing');
        const mobileFilterToggle = document.getElementById('mobileFilterToggle');
        const productsFilters = document.getElementById('productsFilters');
        const menuToggle = document.getElementById('menuToggle');
        const mobileNav = document.getElementById('mobileNav');
        const menuIcon = document.querySelector('.menu-icon');
        const closeIcon = document.querySelector('.close-icon');

        // Update price range display
        function updatePriceDisplay() {
            const priceValue = priceRange.value;
            maxPrice.textContent = `₦${parseInt(priceValue).toLocaleString()}`;
        }

        // Filter products based on selected criteria
        function filterProducts() {
            let filteredProducts = [...allProducts];
            
            // Search filter
            const searchTerm = searchInput.value.toLowerCase();
            if (searchTerm) {
                filteredProducts = filteredProducts.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.description.toLowerCase().includes(searchTerm)
                );
            }
            
            // Category filter
            const selectedCategories = Array.from(document.querySelectorAll('input[name="category"]:checked')).map(cb => cb.value);
            if (selectedCategories.length > 0) {
                filteredProducts = filteredProducts.filter(product => 
                    selectedCategories.includes(product.category)
                );
            }
            
            // Brand filter
            const selectedBrands = Array.from(document.querySelectorAll('input[name="brand"]:checked')).map(cb => cb.value);
            if (selectedBrands.length > 0) {
                filteredProducts = filteredProducts.filter(product => 
                    selectedBrands.includes(product.brand)
                );
            }
            
            // Rating filter
            const selectedRating = document.querySelector('input[name="rating"]:checked');
            if (selectedRating) {
                const minRating = parseFloat(selectedRating.value);
                filteredProducts = filteredProducts.filter(product => 
                    product.rating >= minRating
                );
            }
            
            // Price filter
            const maxPriceValue = parseInt(priceRange.value);
            filteredProducts = filteredProducts.filter(product => 
                product.price <= maxPriceValue
            );
            
            // Display filtered products
            displayProducts(filteredProducts);
        }

        // Function to display products
        function displayProducts(products) {
            productsListing.innerHTML = '';
            
            if (products.length === 0) {
                productsListing.innerHTML = '<div class="no-products">No products found matching your criteria.</div>';
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.setAttribute('data-id', product.id);
                
                productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="product-info">
                        <div class="product-category">${product.category}</div>
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">₦${product.price.toLocaleString()}</div>
                        <div class="product-actions">
                            <a href="product-details.html?id=${product.id}" class="btn-primary">View Details</a>
                            <button class="btn-outline add-to-cart-btn" data-product='${JSON.stringify(product).replace(/'/g, "&#39;")}'>
                                <i class="fas fa-shopping-cart"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                `;
                productsListing.appendChild(productCard);
            });
            
            // Add event listeners to the newly created "Add to Cart" buttons
            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productData = JSON.parse(this.getAttribute('data-product').replace(/&#39;/g, "'"));
                    const product = {
                        id: productData.id,
                        name: productData.name,
                        price: productData.price,
                        quantity: 1,
                        size: 'Default', // Default size
                        color: 'Default', // Default color
                        image: productData.image
                    };
                    
                    cartManager.addToCart(product);
                    
                    // Visual feedback on button
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Added';
                    this.style.backgroundColor = '#d1fae5';
                    this.style.color = '#059669';
                    this.style.borderColor = '#059669';
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.style.backgroundColor = '';
                        this.style.color = '';
                        this.style.borderColor = '';
                    }, 2000);
                });
            });
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Set initial price display
            updatePriceDisplay();
            
            // Display all products initially
            displayProducts(allProducts);
            
            // Mobile filter toggle
            mobileFilterToggle.addEventListener('click', function() {
                productsFilters.classList.toggle('show');
            });
            
            // Event listeners for all filter changes
            searchInput.addEventListener('input', filterProducts);
            priceRange.addEventListener('input', () => {
                updatePriceDisplay();
                filterProducts();
            });
            
            // Add event listeners to all checkboxes and radio buttons
            document.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(input => {
                input.addEventListener('change', filterProducts);
            });
            
            // Reset filters
            resetFiltersBtn.addEventListener('click', () => {
                // Reset all filters
                document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                    checkbox.checked = false;
                });
                document.querySelectorAll('input[type="radio"]').forEach(radio => {
                    radio.checked = false;
                });
                priceRange.value = 500000;
                updatePriceDisplay();
                searchInput.value = '';
                
                // Show all products
                displayProducts(allProducts);
            });
        });
    </script>

    <script src="/js/products.js"></script>
</body>
</html>